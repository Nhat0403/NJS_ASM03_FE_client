{"ast":null,"code":"const initalState = {\n  id_user: '',\n  listCart: []\n};\n\nconst ReducerCart = (state = initalState, action) => {\n  switch (action.type) {\n    //Nhận dữ liệu id_user và thay đổi state\n    case 'ADD_USER':\n      console.log('id_user: ', action.data);\n      state = {\n        id_user: action.data,\n        listCart: state.listCart\n      };\n      return state;\n\n    case 'ADD_CART':\n      console.log(state.listCart); //Lấy dữ liệu được truyền tới\n\n      const data_add_cart = action.data; //Lấy dữ liệu có sẵn trong state\n\n      const add_cart = state.listCart;\n\n      if (add_cart.length < 1) {\n        add_cart.push(data_add_cart);\n      } else {\n        //Tìm Vị Trí của sản phẩm đã mua\n        const indexCart = add_cart.findIndex(value => {\n          return value.productId._id.toString() === data_add_cart.productId._id.toString();\n        }); //Tìm xem thử sản phẩm này đã mua hay chưa\n\n        const findCart = add_cart.find(value => {\n          return value.productId._id.toString() === data_add_cart.productId._id.toString();\n        }); //Nếu này chưa được mua thì mình push vào\n        //Còn đã từng mua rồi thì mình update tại vị trí indexCart mà mình vừa tìm được\n\n        if (!findCart) {\n          add_cart.push(data_add_cart);\n          console.log('Push');\n        } else {\n          add_cart[indexCart].quantity = parseInt(add_cart[indexCart].quantity) + parseInt(data_add_cart.quantity);\n          console.log('Update');\n        }\n      }\n\n      state = {\n        id_user: state.id_user,\n        listCart: add_cart\n      };\n      console.log(state);\n      return state;\n\n    case 'DELETE_CART':\n      //Lấy dữ liệu được truyền tới\n      const data_delete_cart = action.data; //Lấy dữ diệu có sẵn trong state\n\n      const delete_cart = state.listCart; //Tìm kiểm vị trí mà cần xóa\n\n      const indexDelete = delete_cart.findIndex(value => {\n        return value.idProduct === data_delete_cart.idProduct;\n      }); //Xóa theo vị trí\n\n      delete_cart.splice(indexDelete, 1);\n      state = {\n        id_user: state.id_user,\n        listCart: delete_cart\n      };\n      return state;\n\n    case 'DELETE_ALL_CART':\n      const data_delete_all_cart = action.data;\n      state = {\n        id_user: state.id_user,\n        listCart: data_delete_all_cart\n      };\n      return state;\n\n    case 'UPDATE_CART':\n      const data_update_cart = action.data;\n      const update_cart = state.listCart;\n      const index = update_cart.findIndex(value => {\n        return value.idProduct === data_update_cart.idProduct;\n      });\n      update_cart[index].count = data_update_cart.count;\n      state = {\n        id_user: state.id_user,\n        listCart: update_cart\n      };\n      return state;\n\n    default:\n      return state;\n  }\n};\n\n_c = ReducerCart;\nexport default ReducerCart;\n\nvar _c;\n\n$RefreshReg$(_c, \"ReducerCart\");","map":{"version":3,"sources":["D:/funix/NJS301x_1.0-A_VN Lập trình Web Back-End với NodeJS/assignment 03/Frontend Assignment 03/src/Redux/Reducer/ReducerCart.jsx"],"names":["initalState","id_user","listCart","ReducerCart","state","action","type","console","log","data","data_add_cart","add_cart","length","push","indexCart","findIndex","value","productId","_id","toString","findCart","find","quantity","parseInt","data_delete_cart","delete_cart","indexDelete","idProduct","splice","data_delete_all_cart","data_update_cart","update_cart","index","count"],"mappings":"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","sourcesContent":["const initalState = {\n\tid_user: '',\n\tlistCart: [],\n};\n\nconst ReducerCart = (state = initalState, action) => {\n\tswitch (action.type) {\n\t\t//Nhận dữ liệu id_user và thay đổi state\n\t\tcase 'ADD_USER':\n\t\t\tconsole.log('id_user: ', action.data);\n\n\t\t\tstate = {\n\t\t\t\tid_user: action.data,\n\t\t\t\tlistCart: state.listCart,\n\t\t\t};\n\n\t\t\treturn state;\n\n\t\tcase 'ADD_CART':\n\t\t\tconsole.log(state.listCart);\n\n\t\t\t//Lấy dữ liệu được truyền tới\n\t\t\tconst data_add_cart = action.data;\n\n\t\t\t//Lấy dữ liệu có sẵn trong state\n\t\t\tconst add_cart = state.listCart;\n\n\t\t\tif (add_cart.length < 1) {\n\t\t\t\tadd_cart.push(data_add_cart);\n\t\t\t} else {\n\t\t\t\t//Tìm Vị Trí của sản phẩm đã mua\n\t\t\t\tconst indexCart = add_cart.findIndex((value) => {\n\t\t\t\t\treturn value.productId._id.toString() === data_add_cart.productId._id.toString();\n\t\t\t\t});\n\n\t\t\t\t//Tìm xem thử sản phẩm này đã mua hay chưa\n\t\t\t\tconst findCart = add_cart.find((value) => {\n\t\t\t\t\treturn value.productId._id.toString() === data_add_cart.productId._id.toString();\n\t\t\t\t});\n\n\t\t\t\t//Nếu này chưa được mua thì mình push vào\n\t\t\t\t//Còn đã từng mua rồi thì mình update tại vị trí indexCart mà mình vừa tìm được\n\t\t\t\tif (!findCart) {\n\t\t\t\t\tadd_cart.push(data_add_cart);\n\t\t\t\t\tconsole.log('Push');\n\t\t\t\t} else {\n\t\t\t\t\tadd_cart[indexCart].quantity =\n\t\t\t\t\t\tparseInt(add_cart[indexCart].quantity) +\n\t\t\t\t\t\tparseInt(data_add_cart.quantity);\n\t\t\t\t\tconsole.log('Update');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tstate = {\n\t\t\t\tid_user: state.id_user,\n\t\t\t\tlistCart: add_cart,\n\t\t\t};\n\n\t\t\tconsole.log(state);\n\n\t\t\treturn state;\n\n\t\tcase 'DELETE_CART':\n\t\t\t//Lấy dữ liệu được truyền tới\n\t\t\tconst data_delete_cart = action.data;\n\n\t\t\t//Lấy dữ diệu có sẵn trong state\n\t\t\tconst delete_cart = state.listCart;\n\n\t\t\t//Tìm kiểm vị trí mà cần xóa\n\t\t\tconst indexDelete = delete_cart.findIndex((value) => {\n\t\t\t\treturn value.idProduct === data_delete_cart.idProduct;\n\t\t\t});\n\n\t\t\t//Xóa theo vị trí\n\t\t\tdelete_cart.splice(indexDelete, 1);\n\n\t\t\tstate = {\n\t\t\t\tid_user: state.id_user,\n\t\t\t\tlistCart: delete_cart,\n\t\t\t};\n\n\t\t\treturn state;\n\n\t\tcase 'DELETE_ALL_CART':\n\t\t\tconst data_delete_all_cart = action.data;\n\n\t\t\tstate = {\n\t\t\t\tid_user: state.id_user,\n\t\t\t\tlistCart: data_delete_all_cart,\n\t\t\t};\n\n\t\t\treturn state;\n\n\t\tcase 'UPDATE_CART':\n\t\t\tconst data_update_cart = action.data;\n\n\t\t\tconst update_cart = state.listCart;\n\n\t\t\tconst index = update_cart.findIndex((value) => {\n\t\t\t\treturn value.idProduct === data_update_cart.idProduct;\n\t\t\t});\n\n\t\t\tupdate_cart[index].count = data_update_cart.count;\n\n\t\t\tstate = {\n\t\t\t\tid_user: state.id_user,\n\t\t\t\tlistCart: update_cart,\n\t\t\t};\n\n\t\t\treturn state;\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default ReducerCart;\n"]},"metadata":{},"sourceType":"module"}